/* Tailwind CSS v4 import */
@import 'tailwindcss';
@config "../../tailwind.config.mjs";

/* Font face declarations from pages.css */
@font-face {
  font-family: 'Titillium';
  src: url('/fonts/titilliumweb-regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Titillium';
  src: url('/fonts/titilliumweb-italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Titillium';
  src: url('/fonts/titilliumweb-bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Titillium';
  src: url('/fonts/titilliumweb-semibold.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Titillium';
  src: url('/fonts/titilliumweb-extralight.woff2') format('woff2');
  font-weight: 200;
  font-style: normal;
  font-display: swap;
}

/* Base layer customizations */
@layer base {
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes zoom {
    0% {
      transform: scale(0);
    }
    to {
      transform: scale(1);
    }
  }

  @keyframes clockwise {
    0% {
      transform-origin: 50%;
      transform: rotate(0);
    }
    to {
      transform-origin: 50%;
      transform: rotate(360deg);
    }
  }

  @keyframes anticlockwise {
    0% {
      transform-origin: 50%;
      transform: rotate(0);
    }
    to {
      transform-origin: 50%;
      transform: rotate(-360deg);
    }
  }
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  * {
    margin: 0;
  }

  html {
    height: 100%;
    overflow-x: clip;
  }

  body {
    font-family: 'Titillium', Arial, sans-serif;
    overflow-x: clip;
  }

  img,
  picture,
  video,
  canvas,
  svg {
    max-width: 100%;
  }

  input,
  button,
  textarea,
  select {
    font: inherit;
  }

  /* Preserve CSS custom properties for compatibility */
  :root {
    --color-primary-fallback: #007777;
    --color-primary: oklch(51.54% 0.088 194.77);
    --color-primary-bg-fallback: rgba(7, 121, 114, 0.1);
    --color-primary-bg: oklch(51.95% 0.089 187.7 / 0.1);
    --border-radius: 6px;
    --max-content-width: 1160px;
    --site-header-height: 4.375rem;
    --box-shadow:
      0px 1px 1px hsla(0, 0%, 0%, 0.06), 0px 2px 2px hsla(0, 0%, 0%, 0.06);
    --color-white: #fff;
    --color-black: #000;
    --color-btn-txt: var(--color-white);
    --color-gray: #444;
    --color-frost: rgba(255, 255, 255, 0.5);
    --color-header-bg: var(--color-white);
    --color-header-accent: #eee;
    --color-table-stripe: #f6f7f9;
    --color-bg-inline-code: #edeef3;
    --option1: linear-gradient(
      to bottom,
      hsla(162, 86%, 12%, 1),
      hsla(176, 100%, 30%, 1)
    );

    /* Pillar palette - used for page-level theming via data-pillar attributes.
       --color-primary is the theming hook that components and prose read.
       Page wrappers override it via [data-pillar] to recolor sections. */
    --color-tech-main: oklch(51.54% 0.088 194.77);
    --color-tech-main-fallback: #007777;
    --color-mission-main: oklch(55.27% 0.205 32.62);
    --color-mission-main-fallback: #cf2801;
    --color-vision-main: oklch(46.08% 0.258 291.47);
    --color-vision-main-fallback: #6500d8;
    --color-values-main: oklch(56.84% 0.229 3.717);
    --color-values-main-fallback: #d80068;
  }

  [data-theme='dark'] {
    --color-bg: var(--color-black);
    --color-text: var(--color-white);
    --color-btn-txt: var(--color-white);
  }

  /* Pillar overrides - set on page wrapper via data-pillar attribute */
  [data-pillar='tech'] {
    --color-primary: var(--color-tech-main);
  }
  [data-pillar='mission'] {
    --color-primary: var(--color-mission-main);
  }
  [data-pillar='vision'] {
    --color-primary: var(--color-vision-main);
  }
  [data-pillar='values'] {
    --color-primary: var(--color-values-main);
  }

  main {
    @apply flex-1 text-step-0;
  }

  strong {
    color: var(--color-primary);
  }

  a {
    @apply text-current transition-colors duration-slow;
  }

  a:hover {
    color: var(--color-primary);
  }
}

/* Generate dynamic Tailwind utilities (text-primary, bg-primary, border-primary, etc.)
   that read from var(--color-primary). This makes them respond to [data-pillar]
   overrides on ancestor elements. Uses @theme inline so the CSS variable is
   inlined in the generated utility CSS, resolving at the element's DOM position
   rather than at :root. */
@theme inline {
  --color-primary: var(--color-primary);
}

/*
 * Prose element defaults — placed in @layer components so that
 * utility classes on child elements (e.g. CtaButton's text-(--color-btn-txt))
 * always win via Tailwind's cascade: @layer utilities > @layer components.
 *
 * Default prose styles match Drupal v4 production (no data attribute needed).
 * Specialized contexts can override:
 *   [data-prose]        — foundation pages: visible underline by default
 *   [data-prose-blog]   — blog articles: more spacing, tables, code blocks
 *   [data-prose-summit] — summit pages: heading normalization only
 *
 * All read var(--color-primary) which can be overridden per-page via data-pillar.
 */
@layer components {
  /* === Default prose styles (Drupal v4 production defaults) === */
  main a {
    color: var(--color-primary);
    text-decoration-color: transparent;
    text-decoration-line: underline;
    transition: text-decoration-color 200ms ease-in-out;
  }
  main a:hover {
    text-decoration-color: currentColor;
  }
  main p {
    line-height: 1.39;
  }

  /* === Shared prose typography === */
  [data-prose] h2,
  [data-prose-blog] h2 {
    margin-block-start: var(--space-l);
    margin-block-end: var(--space-s);
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--color-primary);
  }

  [data-prose] h3,
  [data-prose-blog] h3 {
    margin-block-start: var(--space-m);
    margin-block-end: var(--space-xs);
    font-size: 1.25rem;
    font-weight: 600;
  }

  [data-prose] p,
  [data-prose-blog] p {
    margin-block-end: var(--space-s);
    line-height: 1.6;
  }

  [data-prose] ul,
  [data-prose-blog] ul,
  [data-prose] ol,
  [data-prose-blog] ol {
    margin-block-end: var(--space-s);
    padding-inline-start: var(--space-m);
  }

  [data-prose] li,
  [data-prose-blog] li {
    margin-block-end: var(--space-xs);
  }

  /* === Foundation page links (underlined by default) === */
  [data-prose] a {
    color: var(--color-primary);
    text-decoration-line: underline;
  }
  [data-prose] a:hover {
    text-decoration-line: none;
  }

  /* === Blog prose links (no underline by default, underline on hover) === */
  [data-prose-blog] a {
    color: var(--color-primary);
    text-decoration-line: none;
  }
  [data-prose-blog] a:hover {
    text-decoration-line: underline;
  }

  /* === Blog-specific: additional element spacing === */
  [data-prose-blog] ol {
    margin-block-end: var(--space-s);
  }
  [data-prose-blog] figure {
    margin-block-end: var(--space-s);
  }
  [data-prose-blog] hr {
    margin-block-end: var(--space-s);
  }
  [data-prose-blog] h4 {
    margin-block-end: var(--space-xs);
  }
  [data-prose-blog] figcaption {
    font-size: var(--step--1);
    font-style: italic;
  }
  [data-prose-blog] ul li {
    margin-block-end: var(--space-2xs);
  }
  [data-prose-blog] img {
    display: block;
    margin-inline: auto;
  }

  /* === Blog-specific: table styles === */
  [data-prose-blog] table {
    display: table;
    width: 100%;
    border-collapse: collapse;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    margin-block-end: var(--space-m);
  }
  [data-prose-blog] th {
    text-align: left;
    padding-block: var(--space-3xs);
    padding-inline: var(--space-2xs);
  }
  [data-prose-blog] td {
    padding-block: var(--space-3xs);
    padding-inline: var(--space-2xs);
  }
  [data-prose-blog] thead tr {
    background-color: var(--color-table-stripe);
  }
  [data-prose-blog] thead tr:first-of-type th:first-of-type {
    border-start-start-radius: var(--border-radius);
  }
  [data-prose-blog] thead tr:first-of-type th:last-of-type {
    border-start-end-radius: var(--border-radius);
  }
  [data-prose-blog] thead + tbody tr:nth-child(2n) {
    background-color: var(--color-table-stripe);
  }
  [data-prose-blog] tbody tr:last-of-type td:first-child {
    border-end-start-radius: var(--border-radius);
  }
  [data-prose-blog] tbody tr:last-of-type td:last-child {
    border-end-end-radius: var(--border-radius);
  }

  /* === Blog-specific: inline code === */
  [data-prose-blog] :not(pre) > code {
    border-radius: var(--border-radius);
    font-size: var(--step--1);
    background-color: var(--color-bg-inline-code);
    padding-inline: 0.375rem;
    padding-block: 0.125rem;
    overflow-wrap: anywhere;
  }

  /* === Blog-specific: expressive code blocks === */
  [data-prose-blog] .expressive-code {
    margin-block-end: var(--space-s);
  }

  /* === Summit layout heading normalization === */
  [data-prose-summit] h1 {
    font-size: var(--step-4);
  }
  [data-prose-summit] h2 {
    margin-block-start: 0;
    margin-block-end: 0;
    font-size: var(--step-2);
    font-weight: inherit;
    color: inherit;
  }
  [data-prose-summit] h3 {
    margin-block-start: 0;
    margin-block-end: 0;
    font-size: var(--step-1);
    font-weight: inherit;
  }
  [data-prose-summit] h4 {
    font-size: var(--step-0);
  }

  /* === Breadcrumb nav links === */
  [data-nav-links] a {
    color: var(--color-primary);
    text-decoration-line: none;
  }
}
