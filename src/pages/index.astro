---
import { getCollection, render } from 'astro:content'
import BaseLayout from '../layouts/BaseLayout.astro'

const pages = await getCollection('foundation-pages')
const homePage = pages.find((page) => page.data.slug === 'home')

if (!homePage) {
  throw new Error('Homepage not found in foundation-pages collection')
}

const { Content } = await render(homePage)
const { title, heroTitle, heroDescription } = homePage.data
---

<BaseLayout title={title || 'Interledger Foundation'}>
  <main class="pb-space-l">
    <section
      class="bg-gradient-primary bg-no-repeat bg-cover bg-[position:bottom_right] min-h-[50vh] py-space-xl text-white flex items-center"
    >
      <div class="mx-auto w-full max-w-wide px-space-m">
        <div class="max-w-narrow">
          <h1
            class="text-white max-w-[14em] leading-[1.2] font-semibold mb-space-xs text-[clamp(2rem,5vw,3.5rem)]"
          >
            {heroTitle || 'Interledger'}
          </h1>
          <p class="mb-space-m text-[1.25rem] max-w-[600px]">
            {heroDescription}
          </p>
        </div>
      </div>
    </section>

    <section class="py-space-xl">
      <div class="mx-auto max-w-content min-w-[360px] max-[1324px]:px-[5%]">
        <div
          class="mx-auto max-w-narrow [&_h2]:mt-space-l [&_h2]:mb-space-s [&_h2]:text-[1.75rem] [&_h2]:font-semibold [&_h2]:text-primary [&_h3]:mt-space-m [&_h3]:mb-space-xs [&_h3]:text-[1.25rem] [&_h3]:font-semibold [&_p]:mb-space-s [&_p]:leading-[1.6] [&_ul]:mb-space-s [&_ul]:ps-space-m [&_li]:mb-space-xs [&_a]:text-primary [&_a]:underline [&_a:hover]:no-underline [&_.cta-group]:my-space-m [&_.cta-group]:flex [&_.cta-group]:flex-wrap [&_.cta-group]:gap-space-s [&_.cta-group_a]:rounded-pill [&_.cta-group_a]:bg-primary [&_.cta-group_a]:px-space-s [&_.cta-group_a]:py-space-xs [&_.cta-group_a]:text-white [&_.cta-group_a]:no-underline [&_.cta-group_a:hover]:opacity-90"
        >
          <Content />
        </div>
      </div>
    </section>
  </main>
</BaseLayout>
